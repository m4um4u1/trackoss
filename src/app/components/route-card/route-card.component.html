<div class="route-card card h-100">
  <!-- Card Header with Route Type Badge -->
  <div class="card-header d-flex justify-content-between align-items-center">
    <span class="badge" [class]="'bg-' + routeTypeColor">
      <i [class]="routeTypeIcon" class="me-1"></i>
      {{ formatRouteType(route.routeType) }}
    </span>
    <div class="d-flex align-items-center">
      @if (route.isPublic) {
        <i class="bi bi-globe text-success me-2" title="Public route"></i>
      } @else {
        <i class="bi bi-lock text-warning me-2" title="Private route"></i>
      }
      <small class="text-muted">{{ formattedCreatedAt }}</small>
    </div>
  </div>

  <!-- Card Body -->
  <div class="card-body">
    <!-- Route Name -->
    <h5 class="card-title text-truncate" [title]="route.name">
      {{ route.name }}
    </h5>

    <!-- Route Description -->
    @if (route.description) {
      <p class="card-text text-muted small route-description">
        {{ route.description }}
      </p>
    }

    <!-- Route Metrics -->
    <div class="route-metrics mb-3">
      <div class="row g-2 text-center">
        <div class="col-4">
          <div class="metric-item">
            <i class="bi bi-rulers text-primary"></i>
            <div class="metric-value">{{ formattedDistance }}</div>
            <div class="metric-label">Distance</div>
          </div>
        </div>
        <div class="col-4">
          <div class="metric-item">
            <i class="bi bi-clock text-info"></i>
            <div class="metric-value">{{ formattedDuration }}</div>
            <div class="metric-label">Duration</div>
          </div>
        </div>
        <div class="col-4">
          <div class="metric-item">
            <i class="bi bi-arrow-up text-success"></i>
            <div class="metric-value">{{ formattedElevation }}</div>
            <div class="metric-label">Elevation</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Difficulty Rating -->
    @if (parsedMetadata?.difficulty) {
      <div class="difficulty-rating mb-2">
        <small class="text-muted me-2">Difficulty:</small>
        @for (star of difficultyStars; track $index) {
          @if (star === 1) {
            <i class="bi bi-star-fill text-warning"></i>
          } @else {
            <i class="bi bi-star text-muted"></i>
          }
        }
      </div>
    }

    <!-- Surface Type -->
    @if (surfaceTypeDisplay) {
      <div class="surface-type mb-2">
        <small class="text-muted">Surface: </small>
        <span class="badge bg-light text-dark">{{ surfaceTypeDisplay }}</span>
      </div>
    }

    <!-- Route Points Count -->
    <div class="route-points">
      <small class="text-muted">
        <i class="bi bi-geo-alt me-1"></i>
        {{ route.pointCount }} points
      </small>
    </div>
  </div>

  <!-- Card Footer with Actions -->
  <div class="card-footer bg-transparent">
    <div class="d-flex justify-content-between align-items-center">
      <button
        type="button"
        class="btn btn-outline-primary btn-sm"
        (click)="onViewRoute(); $event.stopPropagation()"
        title="View route on map"
      >
        <i class="bi bi-map me-1"></i>
        View on Map
      </button>

      <button
        type="button"
        class="btn btn-danger"
        (click)="onDeleteRoute(); $event.stopPropagation()"
        title="Delete route"
      >
        <i class="bi bi-trash"></i>
      </button>

      <div class="route-stats">
        <small class="text-muted"> Created {{ formattedCreatedAt }} </small>
      </div>
    </div>
  </div>
</div>
