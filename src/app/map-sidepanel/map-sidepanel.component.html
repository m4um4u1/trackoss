<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <!-- Waypoint Manager -->
      <app-waypoint-manager
        [waypoints]="waypoints"
        [enableWaypointMode]="enableWaypointMode"
        [multiWaypointRoute]="currentMultiWaypointRoute"
        (waypointsChanged)="onWaypointsChanged($event)"
        (waypointModeToggled)="onWaypointModeToggled($event)"
        (waypointsCleared)="onWaypointsCleared()"
        (routeCalculated)="onWaypointRouteCalculated()">
      </app-waypoint-manager>

      <!-- Traditional Route Calculator (only show when waypoint mode is disabled) -->
      <div class="mt-3" *ngIf="!enableWaypointMode">
        <app-route-calculator
          [showRouteOptions]="true"
          [showClearButton]="true"
          [autoEmitCoordinates]="true"
          (coordinatesReady)="onCoordinatesReady($event)"
          (routeCalculated)="onRouteCalculated($event)"
          (routeCleared)="onRouteCleared()"
          (error)="onRouteError($event)">
        </app-route-calculator>
      </div>

      <!-- Route Options for Waypoint Mode -->
      <div class="mt-3" *ngIf="enableWaypointMode && waypoints.length >= 2">
        <app-route-calculator
          [showRouteOptions]="true"
          [showClearButton]="true"
          [showCalculateButton]="false"
          [autoEmitCoordinates]="false"
          [showLocationInputs]="false"
          (routeCleared)="onWaypointRouteCleared()"
          (error)="onRouteError($event)">
        </app-route-calculator>
      </div>

      <div class="mt-3">
        <app-route-display
          [showActions]="true"
          [showNoRouteMessage]="false"
          [autoUpdate]="true">
        </app-route-display>
      </div>
    </div>
  </div>
</div>
